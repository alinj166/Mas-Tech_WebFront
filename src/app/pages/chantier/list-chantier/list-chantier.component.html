<div class="container mt-5 mb-3">
	<div class="table-title">
		<div class="row">
			<div class="col-sm-6">
				<h2>Gestion <b>des Chantiers</b></h2>
			</div>
		
		</div>
	</div>
    <div class="row">
        <div *ngFor="let t of Chantiers" class="col-md-4">
            <div class="card p-3 mb-2" >
                <div class="d-flex justify-content-between">
                    <div class="d-flex flex-row align-items-center">
                        <div class="icon"> <i class="bx bxl-mailchimp"></i> </div>
                        <div class="ms-2 c-details">
                            <h3 class="card-title mb-0">{{t.nom}}</h3> 
							<div *ngIf="!t.etat" class="badge bg-success my-2">En cours..</div>
							<div *ngIf="t.etat" class="badge bg-danger my-2">Fermer</div>
									<p></p>
							<p class="mb-1 pe-2 text-nowrap mb-2 d-inline-block">
								<span>
									<i class="mdi mdi-calendar-range text-muted"></i>
									Date Debut: {{t.date_debut }}
								</span>
							</p>
							<P *ngIf="t.date_fin" class="mb-1 pe-2 text-nowrap mb-2 d-inline-block">
			
								<i class="mdi mdi-calendar-check text-muted"></i>
								Date Fin: {{t.date_fin | date: 'dd-MM-yyyy'}}
			
							</P>
                        </div>
                    </div>
                    <div > 
							<div class="card-actions float-right">
						<div class="dropdown show">
							<a href="#" data-toggle="dropdown" data-display="static">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
									fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
									stroke-linejoin="round" class="feather feather-more-horizontal align-middle">
									<circle cx="12" cy="12" r="1"></circle>
									<circle cx="19" cy="12" r="1"></circle>
									<circle cx="5" cy="12" r="1"></circle>
								</svg>
							</a>
	
							<div class="dropdown-menu dropdown-menu-right">
							
								<button class="dropdown-item"  (click)="openPopup()" ><i class="mdi mdi-account-hard-hat " ></i>Affecter</button>
								<button class=" dropdown-item " style="color:rgb(255, 36, 36)" (click)="cloturerChantier(t.id)"><i class=" mdi mdi-close-circle-outline" ></i>Cloturer</button>

							</div>
						</div>
					</div> </div>
                </div>

                <div class="mt-5">
					<p class="card-text">{{t.description}} </p>
	                    <div class="mt-5">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar"      [style.width.%]="t.percentAvancement" [attr.aria-valuenow]="t.percentAvancement" aria-valuemin="0" aria-valuemax="100"></div>

                          </div>
                        <div class="mt-3" style="font-size: 24px"> {{t.percentAvancement}}%</div>
                    </div>
					
                </div>
                <ng-container *ngFor="let j of listChefProjet">
                    <div class="card-body px-4 pt-2" *ngIf="j.id== t.chefProjetId">
                      <i *ngIf="!j.imageURL" class="mdi mdi-account-hard-hat "  style="font-size: 24px;" ></i>
                      <img *ngIf="j.imageURL" [src]="j.imageURL" class="rounded-circle mr-1"
                        alt="Avatar" width="28" height="28">{{ j.prenom }} {{ j.nom }}         
                    </div>	
              </ng-container>
				
				<button  routerLink="../listEtage" class="btn  btn-primary">Voir les etages</button>

            </div>
        </div>
       
    </div>
</div>
<br>
